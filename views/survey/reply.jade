extends ../layout

block content
  .container
    h1.page-header 설문조사 응답
    h3.page-header= survey.title
    h3 by #{survey.email}
    h3 설문 설명
    .well= survey.content
    h4 설문 조사 
    div
      | #{survey.selecttitle}
      p
      input.select(type='radio', id='select', name='select',value='1')
      | #{survey.select[0]}
      input.select(type='radio', id='select', name='select',value='2')
      | #{survey.select[1]}
      input.select(type='radio', id='select', name='select',value='3')
      | #{survey.select[2]}
      input.select(type='radio', id='select', name='select',value='4')
      | #{survey.select[3]}
      input.select(type='radio', id='select', name='select',value='5')
      | 기타
      span
        input.ect(type='text', name='ect')
      p
      | #{survey.texttitle}
      input.form-control(type='text', id='text', name='text', placeholder='주관식')
      | #{survey.longtexttitle}
      textarea.form-control(id='longtext', rows='5', name='longtext', placeholder='긴 의견')
    
    hr
    h3 Reply (#{survey.numReply})
    table.table
      tr
        th select
        th text
        th longtext
        th time
      each reply in replys
        tr
          td= reply.select
          td= reply.text
          td= reply.longtext
          td= moment(reply.createdAt).format('YYYY/MM/DD')
    
    form.form-inline(action='/survey/' + survey._id + '/replys', method='POST')
      .form-group
        input.replyselect(type='hidden', name='replyselect')
      .form-group
        input.replytext.form-control(type='hidden', name='replytext', placeholder='text')
      .form-group
        input.replylongtext.form-control(type='hidden', name='replylongtext', size=50, placeholder='longtext')
      button.valuesave.btn.btn-info 설문 저장
      
    hr
    a.btn.btn-default(href='/survey') 전체 목록
    
    script(type='text/javascript').
      $(".valuesave").click(function(){ 
        if($("input[name='select']:checked").val() == 5) {
            $(".replyselect").attr("value",$("input[name='ect']").val());
        } else {
            $(".replyselect").attr("value",$("input[name='select']:checked").val());
        }
        $(".replytext").attr("value",$("#text").val());
        $(".replylongtext").attr("value",$("#longtext").val());
      });
